{"version":3,"sources":["js/input.js","js/index.js"],"names":["CreateHTML","constructor","city","cityName","apikey","getArticlesData","loader","document","getElementById","style","display","nyTimesUrl","fetch","wikiPediaUrl","wikiImageUrl","newYorkArticles","json","wikiArticles","wikiImages","updateUI","heading","createElement","section","divWrapper","createElementWithClass","divContentWrapper","divImageLeft","divImageCentre","divImageRight","imgLeft","imgCentre","imgRight","newYorkArticle","newYorkArticle1","newYorkArticle2","wikiArticle1","wikiArticle2","wikiArticle3","wikiArticle4","wikiArticle5","wikiArticle6","wikiArticle7","wikiArticle8","wikiArticle9","wikiArticle10","wikiArticle11","wikiArticle12","wikiArticle13","wikiArticle14","wikiArticle15","firstChild","removeChild","length","addArticleToHTML","multimedia","src","url","alt","headline","main","query","pages","original","source","terms","description","innerHTML","appendChild","append","lead_paragraph","el","article","div","domDIV","domP","Error","textContent","className","domEl","setAttribute","form","citySearchTerm","addEventListener","evt","preventDefault","value","window"],"mappings":"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","file":"js.b2229db2.js","sourceRoot":"..","sourcesContent":["export default class CreateHTML {\n  constructor(city) {\n    this.cityName = city;\n    this.apikey = 'tIeCgw4YfyqUOqfzPRQks8z8I2tjGGZn';\n  }\n\n  async getArticlesData() {\n    let loader = document.getElementById('loader').style;\n    loader.display = 'block';\n    const nyTimesUrl = await fetch(\n      `https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${\n        this.cityName\n      }&api-key=${this.apikey}`\n    );\n\n    const wikiPediaUrl = await fetch(\n      `https://en.wikipedia.org/w/api.php?&origin=*&action=opensearch&search=${\n        this.cityName\n      }&limit=20`\n    );\n\n    const wikiImageUrl = await fetch(\n      `https://en.wikipedia.org/w/api.php?&origin=*&action=query&format=json&formatversion=2&prop=pageimages|pageterms&piprop=original&titles=${\n        this.cityName\n      }`\n    );\n\n    // Await articles\n    const newYorkdata = await nyTimesUrl.json();\n    const newYorkArticles = newYorkdata['response']['docs'];\n    const wikiArticles = await wikiPediaUrl.json();\n    const wikiImages = await wikiImageUrl.json();\n\n    loader.display = 'none';\n\n    // Populate HTML\n    this.updateUI(newYorkArticles, wikiArticles, wikiImages);\n\n    return { newYorkArticles, wikiArticles, wikiImages };\n  }\n\n  updateUI(newYorkArticles, wikiArticles, wikiImages) {\n    let heading = document.createElement('h1');\n    let section = document.getElementById('main');\n    let divWrapper = this.createElementWithClass('div', 'wrapper');\n    let divContentWrapper = this.createElementWithClass(\n      'div',\n      'content-wrapper'\n    );\n    let divImageLeft = this.createElementWithClass('div', 'image-left');\n    let divImageCentre = this.createElementWithClass('div', 'image-center');\n    let divImageRight = this.createElementWithClass('div', 'image-right');\n    let imgLeft = document.createElement('img');\n    let imgCentre = document.createElement('img');\n    let imgRight = document.createElement('img');\n    const newYorkArticle = newYorkArticles[0];\n    const newYorkArticle1 = newYorkArticles[1];\n    const newYorkArticle2 = newYorkArticles[2];\n    const wikiArticle1 = wikiArticles[2][0];\n    const wikiArticle2 = wikiArticles[2][1];\n    const wikiArticle3 = wikiArticles[2][2];\n    const wikiArticle4 = wikiArticles[2][3];\n    const wikiArticle5 = wikiArticles[2][4];\n    const wikiArticle6 = wikiArticles[2][5];\n    const wikiArticle7 = wikiArticles[2][6];\n    const wikiArticle8 = wikiArticles[2][7];\n    const wikiArticle9 = wikiArticles[2][8];\n    const wikiArticle10 = wikiArticles[2][9];\n    const wikiArticle11 = wikiArticles[2][10];\n    const wikiArticle12 = wikiArticles[2][11];\n    const wikiArticle13 = wikiArticles[2][12];\n    const wikiArticle14 = wikiArticles[2][13];\n    const wikiArticle15 = wikiArticles[2][14];\n\n    // clear html\n    while (section.firstChild) {\n      section.removeChild(section.firstChild);\n    }\n\n    // Error handling\n    if (newYorkArticles.length === 0) {\n      this.addArticleToHTML('h2', 'This plane is not taking off! ðŸ˜”', section);\n      this.addArticleToHTML('h2', '(search again)', section);\n    } else {\n      if (\n        newYorkArticle.multimedia.length > 0 &&\n        newYorkArticle1.multimedia.length > 0 &&\n        newYorkArticle2.multimedia.length > 0\n      ) {\n        imgLeft.src = `http://www.nytimes.com/${\n          newYorkArticle.multimedia[0].url\n        }`;\n        imgLeft.alt = newYorkArticle.headline.main;\n\n        imgRight.src = `http://www.nytimes.com/${\n          newYorkArticle1.multimedia[0].url\n        }`;\n        imgRight.alt = newYorkArticle1.headline.main;\n\n        // Fallback image\n        imgCentre.src = `http://www.nytimes.com/${\n          newYorkArticle2.multimedia[0].url\n        }`;\n        imgCentre.alt = newYorkArticle2.headline.main;\n      } else {\n        imgLeft.src =\n          'https://www.pixilart.com/images/art/1ccb1b2395.gif?v=1469196696';\n        imgLeft.alt = 'Image not available';\n        imgRight.src =\n          'https://www.pixilart.com/images/art/1ccb1b2395.gif?v=1469196696';\n        imgRight.alt = 'Image not available';\n      }\n\n      // Update Fallback image (if available)\n      if (wikiImages.query.pages[0].original) {\n        imgCentre.src = wikiImages.query.pages[0].original.source;\n        imgCentre.alt = wikiImages.query.pages[0].terms.description[0];\n      }\n\n      // Create heading\n      heading.innerHTML = `So you want to live in ${this.cityName}?`;\n      section.appendChild(heading);\n\n      // Add heading to html\n      section.appendChild(divWrapper);\n      divWrapper.appendChild(divContentWrapper);\n\n      // Add paragraph 1 - 2 to the html\n      this.addArticleToHTML('p', wikiArticle1, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle2, divContentWrapper);\n\n      // Add left image div\n      divImageLeft.appendChild(imgLeft);\n\n      // Add left image div footnote\n      divImageLeft.append(newYorkArticle.lead_paragraph);\n      divContentWrapper.appendChild(divImageLeft);\n\n      // Add paragraph 3 - 7\n      this.addArticleToHTML('p', wikiArticle3, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle4, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle5, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle6, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle7, divContentWrapper);\n\n      // Add centre image div\n      divImageCentre.appendChild(imgCentre);\n      divContentWrapper.appendChild(divImageCentre);\n\n      // Add paragraph 8 - 10 to the html\n      this.addArticleToHTML('p', wikiArticle8, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle9, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle10, divContentWrapper);\n\n      // Add right image div\n      divImageRight.appendChild(imgRight);\n\n      // Add right image div footnote\n      divImageRight.append(newYorkArticle1.lead_paragraph);\n      divContentWrapper.appendChild(divImageRight);\n\n      // Add paragraph 11 - 15 to the html\n      this.addArticleToHTML('p', wikiArticle11, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle12, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle13, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle14, divContentWrapper);\n      this.addArticleToHTML('p', wikiArticle15, divContentWrapper);\n    }\n  }\n\n  /**\n   * Returns an instance of the element for the specified tag, attached to the specified DIV Node.\n   * @param el String that specifies the element name. Case-insensitive.\n   * @param article String to be attached to the created element.\n   * @param div Node div to attach the created element.\n   */\n  addArticleToHTML(el, article, div) {\n    let domDIV, domP;\n\n    if (el && typeof el === 'string') {\n      domP = document.createElement(el);\n      domP.textContent = article;\n      domDIV = div.appendChild(domP);\n    } else {\n      throw Error('Element must be a string');\n    }\n\n    return domDIV;\n  }\n\n  /**\n   * Returns a reference to the Node element with the (optional) class name.\n   * @param el String that specifies the element name. Case-insensitive.\n   * @param className String that specifies the class name. Case-insensitive (optional).\n   */\n  createElementWithClass(el, className = '') {\n    let domEl;\n\n    if (el && typeof el === 'string') {\n      domEl = document.createElement(el);\n    } else {\n      throw Error('Element must be a string');\n    }\n\n    if (className && typeof className === 'string' && className != '') {\n      domEl.setAttribute('class', className);\n    }\n    return domEl;\n  }\n}\n","import CreateHTML from './input';\n\nwindow.addEventListener('DOMContentLoaded', main, false);\n\nfunction main() {\n  const form = document.getElementById('form-container');\n  const citySearchTerm = document.getElementById('city');\n\n  form.addEventListener('submit', evt => {\n    evt.preventDefault();\n    const city = citySearchTerm.value;\n    const api = new CreateHTML(city);\n\n    // Make magic ;)\n    api.getArticlesData();\n  });\n}\n"]}